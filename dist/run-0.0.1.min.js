(function(s,u,w){var q={},r={},v={},p=s.define=function(g,m){var k=g.replace(/\/index$/,"");k!==g&&(v[k]=g);r[g]=r[k]=m},x=s.require=function(g){if(!q[g]){var m="Could not load module: '"+g+"'";if(!r[g])throw Error(m);m={exports:q[g]={}};r[g](function(k){var e=x,f=v[g]||g,d=/(\.?\.\/?)*/.exec(k)[0],b=Math.floor(d.replace(/\//g,"").length/1.9+0.99);b&&(f=f.split("/"),f=f.slice(0,f.length-b),(f=f.join("/"))&&(k=f+"/"+k.slice(d.length)));k=k.replace(/\/$/,"");return e(k)},m.exports,m);q[g]=m.exports}return q[g]};
p("src/child",function(g,m,k){function e(a,b){this.elements=a||[];this.mapper=b}function f(a,b,l,c,d){d||(d=0);a.next(l+d,c,function(a,l,c,n){n&&(n.length-=d);b(a,l-d,c,n)})}function d(a,b){this.next=function(l,c,d){f(a,function(a,h,e,g){if(a)return d(a);g?f(b,d,l,c,-g.length):d(a,h,e,null)},l,c)}}function b(a,b,l,c){this.next=function(d,h,e){if(d>=l&&c)return e(null,null,null,{length:l});f(a,function(a,b,d,t){if(a)return e(a);(!t||c)&&b>=l?e(a,null,null,{length:l}):c&&t?e(a,b,w,null):e(a,b,d,t)},
d,h,b)}}function h(a){a instanceof e||(a=null);this.stream=a||new e}e.prototype.next=function(a,b,c){a>=this.elements.length?c(null,a,null,{length:this.elements.length}):(b=this.elements[a],this.mapper&&(b=this.mapper(b)),c(null,a,b))};e.prototype.each=function(a,b,c,d){var h=this;h.next(c||0,b,function(c,l,e,f){if(c)return d(c);if(f)return d&&d();a(l,e,function(){h.each(a,b,l+1,d)})})};var c=Number.POSITIVE_INFINITY;h.prototype=new e;h.prototype.get=function(a,b){return this.stream.next(a,null,function(){})};
h.prototype.next=function(a,b,c){return this.stream.next(a,b,c)};h.prototype.each=function(a,b,c,d){return this.stream.each(a,b,c,d)};h.prototype.append=function(a){a instanceof e||(a=new e([a]));this.stream=new d(this.stream,a)};h.prototype.insert=function(a,h){h instanceof e||(h=new e([h]));var l=new b(this.stream,0,a,!0),n=new b(this.stream,a,c),n=new d(h,n);this.stream=new d(l,n)};h.prototype.detach=function(a,h){var l=new b(this.stream,0,a,!0),e=new b(this.stream,a+h,c),f=new b(this.stream,a,
h);this.stream=new d(l,e);return f};k.exports=e;e.Append=d;e.Sub=b});p("src/curry",function(g,m,k){function e(d,b){var h=!1,c=function(){var a=Array.prototype.slice.call(arguments,0),b=this,c=[],n=!1;if(!h){for(var g=0;g<a.length;g++)f.equals(a[g])&&c.push(g);n=f.equals(a[a.length-1])}return 0===c.length||h?d.apply(b,a):e(function(){var h=Array.prototype.slice.call(arguments,0),e=c.length-(n?1:0);if(h.length<e)throw Error("Expect at least "+e+" arguments.");n&&a.pop();for(var f=0;f<h.length;f++)f<
e?a[c[f]]=h[f]:a.push(h[f]);return d.apply(b,a)},!0)};c.uncurry=function(){if(!b)throw"Uncurry disabled.";h=!0;return this};return c}var f=(u._||(u._={})).runid={equals:function(d){return d&&this===d.runid}};k.exports=e});p("src/get",function(g,m,k){});p("src/node",function(g,m,k){var e=g("./child");get.json=function(f,d){function b(a){function d(a,c,h){var e=b(c);e?(e.tags[h]=a,g.push(e)):f.prop[a]=c}var f=new InternalNode,g=[];if("number"===typeof a.length)f.tags.array=!0,c(a,[],d);else if(a.constructor===
Object)h(a,d);else return null;f.children=new e(g);return f}function h(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c],"name")}function c(b,d,h){for(var e=0;e<b.length;e++){var f=d.slice(0).push(e);a&&b[e].length?c(b[e],f,h):h(f,b[e],"index")}}var a=(d||{}).flatten,g=b(f);if(!g)throw Error("Expected toplevel array or object.");g.tags.root=!0;return g}});p("src/parse",function(g,m,k){function e(e){this.original=e}e.tokenize=function(f,d){var b=0;return new e(f.match(d).map(function(d){var c={data:d,
pos:b,assert:function(a,b){var c=this.data;if("name"===a){if(c.name||-1==="#:[]=!<>.*{}".indexOf(c[0]))return!0}else if(c===a)return!0;if(b)return!1;throw Error(['Unexpected symbol "'+c+'" ','expected "'+a+'" ',"at column: "+this.pos].join(""));}};b+=d.length;return c}))};e.prototype.parse=function(f){var d,b=0,h=new e(this.original.map(function(c,a){if(!c)return c;var e=!1,h=f.call({setState:function(a){b=a},setCurrent:function(a){d=a},remove:function(){e=!0},expected:function(a,b){return c.assert(a,
b)}},c.data,b,d);return e?null:{data:h,pos:c.pos,assert:c.assert}}));if(0<b)throw Error("Unexpected ending.");return h};m.parse=function(f){var d=[[]];e.tokenize(f,/\#|\:|\[|\]|[\=\!<>]+|\{|\}|\*+|\.|[^\#\:\[\]\=\!<>\{\}\*\.]+/g).parse(function(b,d,c){var a;switch(d){case 0:if("*"===b[0]){a={wildcard:b.length};break}else if(this.expected("name",!0)){a={constant:b};break}else if("{"===b)this.setState(1);else return this.setCurrent(null),b;break;case 1:this.expected("{");this.setState(2);break;case 2:this.expected("name");
a={breakets:b};this.setState(3);break;case 3:this.expected("}");this.setState(4);break;case 4:this.expected("}"),this.setState(0)}if(c)this.remove(),a&&c.push(a);else return this.setCurrent(c=a?[a]:[]),{name:c}}).parse(function(b,d,c){var a;switch(d){case -1:if("["===b){this.setState(3);break}case 0:if(b.name)a={type:"_",name:b.name};else{switch(b){case ".":return b;case "#":this.setState(1);break;case ":":this.setState(2);break;case "[":this.setState(3);break;default:this.expected("#, : or [")}a=
{type:b}}break;case 1:case 2:this.expected("name");c.name=b.name;this.setState(1===d?0:-1);break;case 3:this.expected("name");c.prop=b.name;this.setState(4);break;case 4:-1!=="=!<>".indexOf(b[0])?(c.assert=b,this.setState(5)):(this.expected("]"),this.setState(0));break;case 5:this.expected("name");c.value=b.name;this.setState(6);break;case 6:this.expected("]"),this.setState(0)}if(a)return this.setCurrent(a),a;this.remove()}).parse(function(b){"."===b?d.push([]):d[d.length-1].push(b)});return d}});
p("src/state",function(g,m,k){function e(d,b){this.terms=[{truthy:d||[],falsey:b||[]}]}function f(d,b,e){d=d||[0];b=b||{};e=e||{};this.addTransition=function(c,a,d){b[c]||(b[c]=[]);b[c].push({next:a,dnfa:d})};this.setEndState=function(b){e[b]=!0};this.resolve=function(){for(var b=0;b<d.length;b++)if(e[d[b]])return!0;return!1};this.transition=function(c){if(0===d.length)return this;for(var a={},g=[],l=0;l<d.length;l++)for(var k=b[d[l]]||[],m=0;m<k.length;m++)if(k[m].dnfa.resolve(c)){var p=k[m].next;
a[p]||(a[p]=!0,g.push(p))}return new f(g,b,e)}}e.prototype.or=function(d){d instanceof e||(d=new e([d]));this.terms=this.terms.concat(d.terms);return this};e.prototype.resolve=function(d){for(var b=!1,e=0;e<this.terms.length;e++){for(var c=!0,a=this.terms[e].truthy,f=this.terms[e].falsey,g=0;g<a.length;g++)c&=a[g].resolve(d);for(a=0;a<f.length;a++)c&=!f[a].resolve(d);c&&(b=!0)}return b};e.prototype.transition=function(d){function b(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c].transition(d);return b}
for(var f=new e,c=0;c<this.terms.length;c++)f.terms[c]={truthy:b(this.terms[c].truthy),falsey:b(this.terms[c].falsey)};return f};k.exports.States=f;k.exports.DNF=e;k.exports.Assertion=function(d,b,e,c){this.resolve=function(a){return e(c,(a[d]||{})[b])}}});s.require("src")})("undefined"===typeof exports?window.run={}:exports,Function("return this")());
